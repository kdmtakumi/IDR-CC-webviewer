<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Human IDR+CC Database{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <header>
      <div class="logo">IDR+CC Browser</div>
      <nav>
        <a href="{{ url_for('index') }}">Home</a>
        <a href="{{ url_for('canonical_index') }}">Canonical</a>
        <a href="{{ url_for('reviewed_index') }}">Reviewed</a>
        <a href="{{ url_for('supramolecular') }}">Supramolecular</a>
        <a href="{{ url_for('supramolecular_reviewed') }}">Supramolecular (Reviewed)</a>
        <a href="{{ url_for('idr_index') }}">IDR DB</a>
        <!-- <a href="{{ url_for('prediction') }}">Prediction</a> -->
      </nav>
    </header>

    <main>
      {% block content %}{% endblock %}
    </main>

    <footer>
      <p>IDR+CC Browser Â· Supabase-backed dataset viewer</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      document.querySelectorAll('.location-class-select').forEach((select) => {
        const trigger = select.querySelector('.location-class-trigger');
        const label = select.querySelector('.location-class-trigger-label');
        const menu = select.querySelector('.location-class-menu');
        const input = select.querySelector('.location-class-input');
        const options = select.querySelectorAll('.location-class-option');
        if (!trigger || !label || !menu || !input) return;
        const setActiveOption = (option) => {
          options.forEach((item) => {
            item.classList.remove('active');
            const optionButton = item.querySelector('.location-class-option-button');
            if (optionButton) {
              optionButton.setAttribute('aria-selected', 'false');
            }
          });
          option.classList.add('active');
          const optionButton = option.querySelector('.location-class-option-button');
          if (optionButton) {
            optionButton.setAttribute('aria-selected', 'true');
          }
          const value = option.dataset.value || '';
          input.value = value;
          label.textContent = option.dataset.label || 'All';
        };

        const activeOption = select.querySelector('.location-class-option.active');
        if (activeOption) {
          setActiveOption(activeOption);
        }

        trigger.addEventListener('click', () => {
          const isOpen = menu.classList.toggle('is-open');
          trigger.setAttribute('aria-expanded', String(isOpen));
        });

        options.forEach((option) => {
          const button = option.querySelector('.location-class-option-button');
          if (!button) return;
          button.addEventListener('click', () => {
            setActiveOption(option);
            menu.classList.remove('is-open');
            trigger.setAttribute('aria-expanded', 'false');
          });
        });

        document.addEventListener('click', (event) => {
          if (!select.contains(event.target)) {
            menu.classList.remove('is-open');
            trigger.setAttribute('aria-expanded', 'false');
          }
        });
      });
    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
